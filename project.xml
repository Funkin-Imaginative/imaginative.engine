<?xml version='1.0' encoding='utf-8'?>
<project>
	<!-- Define Setup -->
		<define name='KNOWS_VERSION_ID'/>
		<define name='CHECK_FOR_UPDATES' if='release KNOWS_VERSION_ID' unless='debug'/>
		<define name='MOD_SUPPORT'/>
		<define name='SCRIPT_SUPPORT'/>
		<define name='ALLOW_SHADERS'/>

		<!-- script related -->
		<section if='SCRIPT_SUPPORT'>
			<define name='CAN_HAXE_SCRIPT'/> <!-- Haxe Language -->
			<define name='CAN_LUA_SCRIPT'/> <!-- Lua Language -->

			<define name='DISABLE_DCE'/>
			<haxedef name='SCRIPTED_STATES'/>
			<define name='CUSTOM_CLASSES' if='CAN_HAXE_SCRIPT'/>

			<echo value='Scripting was enabled.'/>
		</section>
		<section if='cpp'>
			<define name='DISCORD_RICH_PRESENCE' if='desktop'/>
			<define name='ALLOW_VIDEOS' if='desktop || android'/>
		</section>
	<!-- Define Setup -->

	<app
		title="Friday Night Funkin': Imaginative Engine" main='backend.system.Main'
		packageName='funkin.imaginative.com' package='funkin.imaginative.com'
		file='Imaginative' version='0.0.0' company='Funkin-Imaginative'
		preloader='backend.system.Preloader'
	/>

	<!--Minimum without FLX_NO_GAMEPAD: 11.8, without FLX_NO_NATIVE_CURSOR: 11.2-->
	<set name='SWF_VERSION' value='11.8'/>

	<!-- Window Settings -->
		<window allowShaders='false' unless='ALLOW_SHADERS'/>
		<window width='1280' height='720' background='#000000' fps='' orientation='landscape'/>
		<window if='mobile' fullscreen='true' resizable='false'/>
	<!-- Window Settings -->

	<!-- Path Settings -->
		<!-- Renames -->
		<section if='desktop'>
			<assets path='alsoft.txt' rename='plugins/alsoft.ini'  type='text'     if='windows'/>
			<assets path='alsoft.txt' rename='plugins/alsoft.conf' type='text' unless='windows'/>
		</section>

		<!-- 32bit -->
		<set name='32TAG' value='-32bit' if='32bit'/>
		<set name='32TAG' value='' unless='32bit'/>
		<!-- Export Directories -->
		<set name='BUILD_DIR' value='export/build${32TAG}'   unless='debug'/>
		<set name='BUILD_DIR' value='export/debug${32TAG}'       if='debug'/>
		<set name='BUILD_DIR' value='export/release${32TAG}' unless='debug' if='release'/>
		<set name='BUILD_DIR' value='export/debugging${32TAG}'   if='debug release'/>

		<!-- Pathing -->
		<define name='MainPath' value='funkin'     if='MOD_SUPPORT'/>
		<define name='MainPath' value='assets' unless='MOD_SUPPORT'/>
		<set name='FinalPath' value='solo/${MainPath}'     if='MOD_SUPPORT'/>
		<set name='FinalPath'      value='${MainPath}' unless='MOD_SUPPORT'/>

		<source name='engine/source'/>
		<assets path='engine/assets' rename='${FinalPath}' embed='false' preload='true' exclude='*readme.md'/>
		<assets path='engine/root'   rename=''             embed='false' preload='true' exclude='*readme.md'/>

		<echo value='The main mod is "${FinalPath}".'         if='MOD_SUPPORT'/>
		<echo value='The asset folder is "${FinalPath}".' unless='MOD_SUPPORT'/>

		<!-- Modding -->
		<section if='MOD_SUPPORT'>
			<assets path='engine/modding/upfront'  rename='solo' embed='false' preload='false' exclude='*readme.md'/>
			<assets path='engine/modding/lowerend' rename='mods' embed='false' preload='false' exclude='*readme.md'/>
		</section>
	<!-- Path Settings -->

	<!-- Libraries -->
		<haxedef name='disable-version-check'/> <!-- prevent lime version being forced -->
		<haxelib name='openfl' version='9.2.2'/>
		<haxelib name='lime'   version='8.1.2'/>

		<haxelib name='flixel'        version='git'/>
		<haxelib name='flixel-addons' version='git'/>

		<haxelib name='moonchart'                             version='git'/> <!-- cool chart format converter -->
		<haxelib name='hscript-improved' if='CAN_HAXE_SCRIPT' version='git'/>
		<haxelib name='linc_luajit'      if='CAN_LUA_SCRIPT'  version='git'/>
		<haxelib name='hxdiscord_rpc'    if='DISCORD_RICH_PRESENCE'/>
		<haxelib name='hxvlc'            if='ALLOW_VIDEOS'/>
		<haxelib name='thx.semver'       if='KNOWS_VERSION_ID'/>

		<haxelib name='json2object'/>
		<!-- <haxelib name='extension-androidtools' if='android'/> -->

		<haxelib name='hxWindowColorMode' optional='true'/>
	<!-- Libraries -->

	<!-- Debug Things -->
		<haxelib name='hxcpp-debug-server' if='desktop debug'/>
		<haxedef name='FLX_NO_DEBUG'           unless='debug'/>
	<!-- Debug Things -->

	<!-- might make one -->
	<haxedef name='FLX_NO_FOCUS_LOST_SCREEN'/>

	<haxeflag name='-dce' value='no' if='DISABLE_DCE'/>

	<!-- Extra Stuff -->
		<!-- May remove? -->
		<haxedef name='no-deprecation-warnings'/>

		<define name='message.reporting'        value='pretty'/>
		<define name='message.log-format'       value='pretty'/>
		<define name='HXVLC_NO_SHARE_DIRECTORY' if='ALLOW_VIDEOS'/>
		<define name='hscriptPos'               if='CAN_HAXE_SCRIPT'/>
		<haxedef name='analyzer-optimize'       if='release' unless='debug'/>

		<!-- related to flixel cne fork -->
		<haxedef name='EXPERIMENTAL_FLXGRAPHIC_DESTROY_FIX'/>
	<!-- Extra Stuff -->

	<!--Place custom nodes like icons here (higher priority to override the HaxeFlixel icon)-->
	<!--
	<icon path='art/icon16.png' size='16'/>
	<icon path='art/icon32.png' size='32'/>
	<icon path='art/icon64.png' size='64'/>
	<icon path='art/iconOG.png'/>
	-->
</project>